(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
$(document).ready(function() {
  $('#shopping-list').bootstrapTable();
  return $('#name').typeahead({
    hint: true,
    highlight: true,
    minLength: 3
  }, {
    name: 'types',
    displayKey: 'value',
    source: function(q, cb) {
      return $.get('/api/typeLookup', {
        query: q
      }, function(data) {
        return cb(data.map(function(x) {
          return {
            id: x[0],
            value: x[1]
          };
        }));
      });
    }
  }).on('typeahead:autocompleted typeahead:selected', function(event, data) {
    return $.get("/api/bom/" + data.id, function(data) {
      var g, items, layout, recur, renderer, svg, svgGroup, value, _;
      g = new dagreD3.Digraph();
      recur = function(x, visited) {
        var y, _i, _len, _ref, _results;
        if (visited[x.id] == null) {
          visited[x.id] = x;
          g.addNode(x.id, {
            label: x.label
          });
          _ref = x.nodes;
          _results = [];
          for (_i = 0, _len = _ref.length; _i < _len; _i++) {
            y = _ref[_i];
            recur(y, visited);
            _results.push(g.addEdge(null, y.id, x.id));
          }
          return _results;
        }
      };
      items = {};
      recur(data, items);
      svg = d3.select('svg');
      svgGroup = svg.append('g');
      layout = dagreD3.layout().nodeSep(10).edgeSep(10).rankSep(10).rankDir('RL');
      renderer = new dagreD3.Renderer();
      renderer.zoom(false);
      layout = renderer.layout(layout).run(g, d3.select('svg g'));
      svgGroup.attr('transform', "translate(0, 20)");
      svg.attr('width', '100%');
      svg.attr('height', layout.graph().height + 40);
      return $('#shopping-list').bootstrapTable('load', (function() {
        var _results;
        _results = [];
        for (_ in items) {
          value = items[_];
          if (value.label !== data.label && value.nodes.length === 0) {
            _results.push(value);
          }
        }
        return _results;
      })());
    });
  });
});



},{}]},{},[1])
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9wbWdyZW1vL1Byb2plY3RzL2ludmVudGlvbi9ub2RlX21vZHVsZXMvZ3VscC1icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCIvVXNlcnMvcG1ncmVtby9Qcm9qZWN0cy9pbnZlbnRpb24vY2xpZW50L2ludmVudGlvbi9pbnZlbnRpb24uY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FDQUEsQ0FBQSxDQUFFLFFBQUYsQ0FBVyxDQUFDLEtBQVosQ0FBa0IsU0FBQSxHQUFBO0FBQ2hCLEVBQUEsQ0FBQSxDQUFFLGdCQUFGLENBQW1CLENBQUMsY0FBcEIsQ0FBQSxDQUFBLENBQUE7U0FFQSxDQUFBLENBQUUsT0FBRixDQUNBLENBQUMsU0FERCxDQUVJO0FBQUEsSUFBQSxJQUFBLEVBQU0sSUFBTjtBQUFBLElBQ0EsU0FBQSxFQUFXLElBRFg7QUFBQSxJQUVBLFNBQUEsRUFBVyxDQUZYO0dBRkosRUFNSTtBQUFBLElBQUEsSUFBQSxFQUFNLE9BQU47QUFBQSxJQUNBLFVBQUEsRUFBWSxPQURaO0FBQUEsSUFFQSxNQUFBLEVBQVEsU0FBQyxDQUFELEVBQUksRUFBSixHQUFBO2FBQ04sQ0FBQyxDQUFDLEdBQUYsQ0FBTSxpQkFBTixFQUF5QjtBQUFBLFFBQUEsS0FBQSxFQUFPLENBQVA7T0FBekIsRUFBbUMsU0FBQyxJQUFELEdBQUE7ZUFDakMsRUFBQSxDQUFHLElBQUksQ0FBQyxHQUFMLENBQVMsU0FBQyxDQUFELEdBQUE7aUJBQU87QUFBQSxZQUFBLEVBQUEsRUFBSSxDQUFFLENBQUEsQ0FBQSxDQUFOO0FBQUEsWUFBVSxLQUFBLEVBQU8sQ0FBRSxDQUFBLENBQUEsQ0FBbkI7WUFBUDtRQUFBLENBQVQsQ0FBSCxFQURpQztNQUFBLENBQW5DLEVBRE07SUFBQSxDQUZSO0dBTkosQ0FXQSxDQUFDLEVBWEQsQ0FXSSw0Q0FYSixFQVdrRCxTQUFDLEtBQUQsRUFBUSxJQUFSLEdBQUE7V0FDaEQsQ0FBQyxDQUFDLEdBQUYsQ0FBTyxXQUFBLEdBQVcsSUFBSSxDQUFDLEVBQXZCLEVBQTZCLFNBQUMsSUFBRCxHQUFBO0FBQzNCLFVBQUEsMERBQUE7QUFBQSxNQUFBLENBQUEsR0FBUSxJQUFBLE9BQU8sQ0FBQyxPQUFSLENBQUEsQ0FBUixDQUFBO0FBQUEsTUFFQSxLQUFBLEdBQVEsU0FBQyxDQUFELEVBQUksT0FBSixHQUFBO0FBQ04sWUFBQSwyQkFBQTtBQUFBLFFBQUEsSUFBSSxxQkFBSjtBQUNFLFVBQUEsT0FBUSxDQUFBLENBQUMsQ0FBQyxFQUFGLENBQVIsR0FBZ0IsQ0FBaEIsQ0FBQTtBQUFBLFVBQ0EsQ0FBQyxDQUFDLE9BQUYsQ0FBVSxDQUFDLENBQUMsRUFBWixFQUFnQjtBQUFBLFlBQUEsS0FBQSxFQUFPLENBQUMsQ0FBQyxLQUFUO1dBQWhCLENBREEsQ0FBQTtBQUVBO0FBQUE7ZUFBQSwyQ0FBQTt5QkFBQTtBQUNFLFlBQUEsS0FBQSxDQUFNLENBQU4sRUFBUyxPQUFULENBQUEsQ0FBQTtBQUFBLDBCQUNBLENBQUMsQ0FBQyxPQUFGLENBQVUsSUFBVixFQUFnQixDQUFDLENBQUMsRUFBbEIsRUFBc0IsQ0FBQyxDQUFDLEVBQXhCLEVBREEsQ0FERjtBQUFBOzBCQUhGO1NBRE07TUFBQSxDQUZSLENBQUE7QUFBQSxNQVNBLEtBQUEsR0FBUSxFQVRSLENBQUE7QUFBQSxNQVVBLEtBQUEsQ0FBTSxJQUFOLEVBQVksS0FBWixDQVZBLENBQUE7QUFBQSxNQVlBLEdBQUEsR0FBTSxFQUFFLENBQUMsTUFBSCxDQUFVLEtBQVYsQ0FaTixDQUFBO0FBQUEsTUFhQSxRQUFBLEdBQVcsR0FBRyxDQUFDLE1BQUosQ0FBVyxHQUFYLENBYlgsQ0FBQTtBQUFBLE1BY0EsTUFBQSxHQUFTLE9BQU8sQ0FBQyxNQUFSLENBQUEsQ0FDUCxDQUFDLE9BRE0sQ0FDRSxFQURGLENBRVAsQ0FBQyxPQUZNLENBRUUsRUFGRixDQUdQLENBQUMsT0FITSxDQUdFLEVBSEYsQ0FJUCxDQUFDLE9BSk0sQ0FJRSxJQUpGLENBZFQsQ0FBQTtBQUFBLE1BbUJBLFFBQUEsR0FBZSxJQUFBLE9BQU8sQ0FBQyxRQUFSLENBQUEsQ0FuQmYsQ0FBQTtBQUFBLE1Bb0JBLFFBQVEsQ0FBQyxJQUFULENBQWMsS0FBZCxDQXBCQSxDQUFBO0FBQUEsTUFxQkEsTUFBQSxHQUFTLFFBQVEsQ0FBQyxNQUFULENBQWdCLE1BQWhCLENBQXVCLENBQUMsR0FBeEIsQ0FBNEIsQ0FBNUIsRUFBK0IsRUFBRSxDQUFDLE1BQUgsQ0FBVSxPQUFWLENBQS9CLENBckJULENBQUE7QUFBQSxNQXVCQSxRQUFRLENBQUMsSUFBVCxDQUFjLFdBQWQsRUFBMkIsa0JBQTNCLENBdkJBLENBQUE7QUFBQSxNQXdCQSxHQUFHLENBQUMsSUFBSixDQUFTLE9BQVQsRUFBa0IsTUFBbEIsQ0F4QkEsQ0FBQTtBQUFBLE1BeUJBLEdBQUcsQ0FBQyxJQUFKLENBQVMsUUFBVCxFQUFtQixNQUFNLENBQUMsS0FBUCxDQUFBLENBQWMsQ0FBQyxNQUFmLEdBQXdCLEVBQTNDLENBekJBLENBQUE7YUEyQkEsQ0FBQSxDQUFFLGdCQUFGLENBQW1CLENBQUMsY0FBcEIsQ0FBbUMsTUFBbkM7O0FBQTRDO2FBQUEsVUFBQTsyQkFBQTtjQUFpQyxLQUFLLENBQUMsS0FBTixLQUFpQixJQUFJLENBQUMsS0FBdEIsSUFBZ0MsS0FBSyxDQUFDLEtBQUssQ0FBQyxNQUFaLEtBQXNCO0FBQXZGLDBCQUFBLE1BQUE7V0FBQTtBQUFBOztVQUE1QyxFQTVCMkI7SUFBQSxDQUE3QixFQURnRDtFQUFBLENBWGxELEVBSGdCO0FBQUEsQ0FBbEIsQ0FBQSxDQUFBIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3Rocm93IG5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIil9dmFyIGY9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGYuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sZixmLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsIiQoZG9jdW1lbnQpLnJlYWR5IC0+XG4gICQoJyNzaG9wcGluZy1saXN0JykuYm9vdHN0cmFwVGFibGUoKVxuXG4gICQoJyNuYW1lJylcbiAgLnR5cGVhaGVhZFxuICAgICAgaGludDogdHJ1ZVxuICAgICAgaGlnaGxpZ2h0OiB0cnVlXG4gICAgICBtaW5MZW5ndGg6IDNcbiAgICAsXG4gICAgICBuYW1lOiAndHlwZXMnXG4gICAgICBkaXNwbGF5S2V5OiAndmFsdWUnXG4gICAgICBzb3VyY2U6IChxLCBjYikgLT5cbiAgICAgICAgJC5nZXQgJy9hcGkvdHlwZUxvb2t1cCcsIHF1ZXJ5OiBxLCAoZGF0YSkgLT5cbiAgICAgICAgICBjYiBkYXRhLm1hcCAoeCkgLT4gaWQ6IHhbMF0sIHZhbHVlOiB4WzFdXG4gIC5vbiAndHlwZWFoZWFkOmF1dG9jb21wbGV0ZWQgdHlwZWFoZWFkOnNlbGVjdGVkJywgKGV2ZW50LCBkYXRhKSAtPlxuICAgICQuZ2V0IFwiL2FwaS9ib20vI3tkYXRhLmlkfVwiLCAoZGF0YSkgLT5cbiAgICAgIGcgPSBuZXcgZGFncmVEMy5EaWdyYXBoKClcblxuICAgICAgcmVjdXIgPSAoeCwgdmlzaXRlZCkgLT5cbiAgICAgICAgaWYgIXZpc2l0ZWRbeC5pZF0/XG4gICAgICAgICAgdmlzaXRlZFt4LmlkXSA9IHhcbiAgICAgICAgICBnLmFkZE5vZGUgeC5pZCwgbGFiZWw6IHgubGFiZWxcbiAgICAgICAgICBmb3IgeSBpbiB4Lm5vZGVzXG4gICAgICAgICAgICByZWN1ciB5LCB2aXNpdGVkXG4gICAgICAgICAgICBnLmFkZEVkZ2UgbnVsbCwgeS5pZCwgeC5pZFxuICAgICAgaXRlbXMgPSB7fVxuICAgICAgcmVjdXIgZGF0YSwgaXRlbXNcblxuICAgICAgc3ZnID0gZDMuc2VsZWN0ICdzdmcnXG4gICAgICBzdmdHcm91cCA9IHN2Zy5hcHBlbmQgJ2cnXG4gICAgICBsYXlvdXQgPSBkYWdyZUQzLmxheW91dCgpXG4gICAgICAgIC5ub2RlU2VwIDEwXG4gICAgICAgIC5lZGdlU2VwIDEwXG4gICAgICAgIC5yYW5rU2VwIDEwXG4gICAgICAgIC5yYW5rRGlyICdSTCdcbiAgICAgIHJlbmRlcmVyID0gbmV3IGRhZ3JlRDMuUmVuZGVyZXIoKVxuICAgICAgcmVuZGVyZXIuem9vbSBmYWxzZVxuICAgICAgbGF5b3V0ID0gcmVuZGVyZXIubGF5b3V0KGxheW91dCkucnVuIGcsIGQzLnNlbGVjdCAnc3ZnIGcnXG5cbiAgICAgIHN2Z0dyb3VwLmF0dHIgJ3RyYW5zZm9ybScsIFwidHJhbnNsYXRlKDAsIDIwKVwiXG4gICAgICBzdmcuYXR0ciAnd2lkdGgnLCAnMTAwJSdcbiAgICAgIHN2Zy5hdHRyICdoZWlnaHQnLCBsYXlvdXQuZ3JhcGgoKS5oZWlnaHQgKyA0MFxuXG4gICAgICAkKCcjc2hvcHBpbmctbGlzdCcpLmJvb3RzdHJhcFRhYmxlICdsb2FkJywgKHZhbHVlIGZvciBfLCB2YWx1ZSBvZiBpdGVtcyB3aGVuIHZhbHVlLmxhYmVsIGlzbnQgZGF0YS5sYWJlbCBhbmQgdmFsdWUubm9kZXMubGVuZ3RoIGlzIDApXG4iXX0=
